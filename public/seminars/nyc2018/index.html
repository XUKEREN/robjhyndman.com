<!doctype html>
<html class="no-js" lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Forecasting: principles and practice (NYC) | Rob J Hyndman</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans|Merriweather" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/foundation.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/highlight.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/academicons.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/finite.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/kube.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/robjhyndman.css">
</head>
  <body>
    <header>
      <nav class="nav-bar">
	
	  <div class="title-bar" data-responsive-toggle="site-menu" data-hide-for="medium">
	    <button class="site-hamburger" type="button" data-toggle>
	      <i class="fa fa-bars fa-lg" aria-hidden="true"></i>
	    </button>
	    <div class="title-bar-title site-title">
	      <a href="https://robjhyndman.com/"  style="color: #b3cde0">Rob J Hyndman</a>
	    </div>
	    <div class="title-bar-right pull-right">
	      
	      
	    </div>
	  </div>

	  
	    <div class="top-bar" id="site-menu" >
	      <div class="top-bar-title show-for-medium site-title">
		<a href="https://robjhyndman.com/"  style="color: #b3cde0;">Rob J Hyndman</a>
	      </div>
	      <div class="top-bar-left">
		<ul class="menu vertical medium-horizontal">
		  
		  
		  <li><a href="https://robjhyndman.com/hyndsight/">Hyndsight blog</a></li>
		  
		  <li><a href="https://robjhyndman.com/publications/">Publications</a></li>
		  
		  <li><a href="https://robjhyndman.com/software/">Software</a></li>
		  
		  <li><a href="https://robjhyndman.com/seminars/">Seminars</a></li>
		  
		  <li><a href="https://robjhyndman.com/teaching/">Teaching</a></li>
		  
		  <li><a href="https://robjhyndman.com/research-team/">Research team</a></li>
		  
		  <li><a href="https://robjhyndman.com/about/">About</a></li>
		  
		</ul>
	      </div>
	      <div class="top-bar-right show-for-medium">
		
		
	      </div>
	    </div>
	  
	</nav>
    </header>
    <main>
      
<div class="wrapper">
<div class="units-row" style='margin-bottom: 0px;'>
<div class="unit-20">&nbsp;</div>
<div class="unit-60"><h1>Forecasting: principles and practice (NYC)</h1></div>
</div>
<div class="units-row">
  <div class="unit-20 dateblock" style='text-align: right;'>
                  25&nbsp;June&nbsp;2018<br>
                  
                   </p>
    </div>
    <div class="unit-60">
    <article class="pub" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="pub-info">
	
      </div>
      <div class="pub-content"><p><strong>Date</strong>: 25-27 June 2018<br>
<strong>Location</strong>: <a href="https://goo.gl/maps/TRYHqk8hgCC2">eBay, 625 6th Ave, New York, NY 10011, USA</a>.</p>
<p>This page is for people enrolled in my <a href="https://www.eventbrite.com/e/learn-time-series-forecasting-with-rob-hyndman-tickets-45083602268">NYC 3-day workshop</a>.</p>
<div id="prerequisites" class="section level2">
<h2>Prerequisites</h2>
<p>Please bring your own laptop with a recent version of R and RStudio installed, along with the following packages and their dependencies:</p>
<ul>
<li><code>fpp2</code></li>
<li><code>readxl</code></li>
<li><code>thief</code></li>
<li><code>knitr</code></li>
</ul>
<p>Participants will be assumed to be familiar with basic statistical tools such as multiple regression, but no knowledge of time series or forecasting will be assumed.</p>
</div>
<div id="reference" class="section level2">
<h2>Reference</h2>
<p><a href="http://OTexts.org/fpp2" target="_new">
<img src="https://otexts.org/fpp2/fpp2_cover.jpg" alt="alt text" />
</a></p>
</div>
<div id="need-help-with-r" class="section level2">
<h2>Need help with R?</h2>
<ul>
<li><a href="https://www.datacamp.com/courses/free-introduction-to-r">Datacamp: Introduction to R course</a></li>
<li><a href="http://rmarkdown.rstudio.com/lesson-2.html">Help with Rmarkdown</a></li>
<li><a href="http://github.com/rstudio/cheatsheets/raw/master/base-r.pdf">Base R cheatsheet</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf">Rmarkdown cheatsheet</a></li>
</ul>
</div>
<div id="approximate-program" class="section level2">
<h2>Approximate Program</h2>
<div id="monday-25-june" class="section level3">
<h3>Monday 25 June</h3>
<table border=1 cellpadding=2 cellspacing=5 width=100%>
<col width="20%">
<col width="65%">
<col width="15%">
<tr>
<td>
09.00 - 9.30
</td>
<td>
Registration and introduction
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/1-1-Intro.pdf" target="_new">Slides 1-1</a>
</td>
</tr>
<tr>
<td>
9.30 - 10.30
</td>
<td>
Time series graphics
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/1-2-Graphics.pdf" target="_new">Slides 1-2</a>
</td>
</tr>
<tr>
<td>
10.30 - 11.00
</td>
<td>
<em>Break</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
11.00 - 12.30
</td>
<td>
Forecast evaluation
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/1-3-ForecastEvaluation.pdf" target="_new">Slides 1-3</a>
</td>
</tr>
<tr>
<td>
12.30 - 1.30
</td>
<td>
<em>Lunch</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
1.30 - 3.00
</td>
<td>
Exponential Smoothing
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/1-4-ExponentialSmoothing.pdf" target="_new">Slides 1-4</a>
</td>
</tr>
<tr>
<td>
3.00 - 3.30
</td>
<td>
<em>Break</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
3.30 - 5.00
</td>
<td>
ETS and state space models
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/1-5-StateSpace.pdf" target="_new">Slides 1-5</a>
</td>
</tr>
</table>
</div>
<div id="tuesday-26-june" class="section level3">
<h3>Tuesday 26 June</h3>
<table border=1 cellpadding=2 cellspacing=5 width=100%>
<col width="20%">
<col width="65%">
<col width="15%">
<tr>
<td>
9.00 - 10.30
</td>
<td>
Transformations and STL
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/2-1-Transformations.pdf" target="_new">Slides 2-1</a><br>
<a href="https://robjhyndman.com/nyc2018/2-2-Seasonality.pdf" target="_new">Slides 2-2</a>
</td>
</tr>
<tr>
<td>
10.30 - 11.00
</td>
<td>
<em>Break</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
11.00 - 12.30
</td>
<td>
Non-seasonal ARIMA models
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/2-3-Differencing.pdf" target="_new">Slides 2-3</a>
</td>
</tr>
<tr>
<td>
12.30 - 1.30
</td>
<td>
<em>Lunch</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
1.30 - 3.00
</td>
<td>
Non-seasonal ARIMA models
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/2-4-NonseasonalARIMA.pdf" target="_new">Slides 2-4</a>
</td>
</tr>
<tr>
<td>
3.00 - 3.30
</td>
<td>
<em>Break</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
3.30 - 5.00
</td>
<td>
Seasonal ARIMA models
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/2-5-SeasonalARIMA.pdf" target="_new">Slides 2-5</a>
</td>
</tr>
</table>
</div>
<div id="wednesday-27-june" class="section level3">
<h3>Wednesday 27 June</h3>
<table border=1 cellpadding=2 cellspacing=5 width=100%>
<col width="20%">
<col width="65%">
<col width="15%">
<tr>
<td>
9.00 - 10.30
</td>
<td>
Dynamic regression
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/3-1-Dynamic-Regression.pdf" target="_new">Slides 3-1</a>
</td>
</tr>
<tr>
<td>
10.30 - 11.00
</td>
<td>
<em>Break</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
11.00 - 12.30
</td>
<td>
Forecasting with multiple seasonality
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/3-2-TBATS.pdf" target="_new">Slides 3-2</a>
</td>
</tr>
<tr>
<td>
12.30 - 1.30
</td>
<td>
<em>Lunch</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
1.30 - 3.00
</td>
<td>
Hierarchical forecasting
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/3-3-Hierarchical.pdf" target="_new">Slides 3-3</a>
</td>
</tr>
<tr>
<td>
3.00 - 3.30
</td>
<td>
<em>Break</em>
</td>
<td>
</td>
</tr>
<tr>
<td>
3.30 - 4.15
</td>
<td>
Extras
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/3-4-Extras.pdf" target="_new">Slides 3-4</a>
</td>
</tr>
<tr>
<td>
4.15 - 5.00
</td>
<td>
Final comments, questions and discussion
</td>
<td>
<a href="https://robjhyndman.com/nyc2018/3-5-Wrapup.pdf" target="_new">Slides 3-5</a>
</td>
</tr>
</table>
<p> </p>
</div>
</div>
<div id="lab-sessions" class="section level1">
<h1>Lab sessions</h1>
<p>Download the following Rmarkdown file for recording your lab session exercises: <a href="https://robjhyndman.com/nyc2018/Labs.Rmd"><code>Labs.Rmd</code></a></p>
<p> </p>
<div id="lab-session-1" class="section level2">
<h2>Lab Session 1</h2>
<ol style="list-style-type: decimal">
<li><p>Download the <a href="https://robjhyndman.com/nyc2018/retail.csv">monthly Australian retail data</a>. These represent retail sales in various categories for different Australian states.</p></li>
<li><p>Read the data into R and choose <em>one</em> of the series. This time series will be used throughout the short course in lab sessions.</p>
<p>Please script this, don’t just use the Rstudio click-and-point interface. That way you can save the results for easy replication later.</p>
<pre class="r"><code>retaildata &lt;- read.csv(&quot;retail.csv&quot;)
mytimeseries &lt;- ts(retaildata[,4], frequency=12, start=c(1982,4))
autoplot(mytimeseries)</code></pre>
<p>[Replace the column number with your own chosen column.]</p></li>
</ol>
</div>
<div id="lab-session-2" class="section level2">
<h2>Lab Session 2</h2>
<p>Apply the following functions to your chosen retail time series.</p>
<pre class="r"><code>ggseasonplot, ggsubseriesplot</code></pre>
<p>Can you spot any seasonality, cyclicity and trend? What do you learn about the series?</p>
</div>
<div id="lab-session-3" class="section level2">
<h2>Lab Session 3</h2>
<p>The following graphics functions have been introduced:</p>
<pre class="r"><code>autoplot, ggseasonplot, ggsubseriesplot, gglagplot, ggAcf</code></pre>
<p>Apply these functions to the following series:</p>
<pre class="r"><code>bicoal, chicken, dole, usdeaths, bricksq, lynx, ibmclose</code></pre>
<p>Use the help files to find out what the series are.</p>
<p>Can you spot any seasonality, cyclicity and trend? What do you learn about the series?</p>
</div>
<div id="lab-session-4" class="section level2">
<h2>Lab Session 4</h2>
<ol style="list-style-type: decimal">
<li><p>Calculate the residuals from a seasonal naïve forecast applied to quarterly Australian beer production from 1992.</p>
<pre class="r"><code>beer &lt;- window(ausbeer, start=1992)
fc &lt;- snaive(beer)
autoplot(fc)
res &lt;- residuals(fc)
autoplot(res)</code></pre></li>
<li><p>Test if the residuals are white noise.</p>
<pre class="r"><code>checkresiduals(fc)</code></pre>
<p>What do you conclude?</p></li>
</ol>
</div>
<div id="lab-session-5" class="section level2">
<h2>Lab Session 5</h2>
<p>For your retail time series:</p>
<ol style="list-style-type: decimal">
<li><p>Split the data into two parts using</p>
<pre class="r"><code>train &lt;- window(mytimeseries, end=c(2010,12))
test &lt;- window(mytimeseries, start=2011)</code></pre></li>
<li><p>Check that your data have been split appropriately by producing the following plot.</p>
<pre class="r"><code>autoplot(cbind(Training=train,Test=test))</code></pre></li>
<li><p>Calculate forecasts using <code>snaive</code> applied to <code>train</code>.</p></li>
<li><p>Compare the accuracy of your forecasts against the actual values stored in <code>test</code>.</p>
<pre class="r"><code>f1 &lt;- snaive(train)
accuracy(f1, test)</code></pre></li>
<li><p>Check the residuals</p>
<pre class="r"><code>checkresiduals(f1)</code></pre>
<p>Do the residuals appear to be uncorrelated and normally distributed?</p></li>
<li><p>How sensitive are the accuracy measures to the training/test split?</p></li>
</ol>
</div>
<div id="lab-session-6" class="section level2">
<h2>Lab Session 6</h2>
<p>Use time series cross-validation to compare the four benchmark methods on your retail data.</p>
</div>
<div id="lab-session-7" class="section level2">
<h2>Lab Session 7</h2>
<ol style="list-style-type: decimal">
<li><p>For this exercise, use the price of a dozen eggs in the United States
from 1900–1993 (data set <code>eggs</code>).</p>
<ul>
<li>Use SES and Holt’s method (with and without damping) to forecast “future” data.<br>
[Hint: use <code>h=100</code> so you can clearly see the differences between the options when plotting the forecasts.]</li>
<li>Which method gives the best training RMSE?</li>
<li>Are these RMSE values comparable?</li>
<li>Do the residuals from the best fitting method look like white noise?</li>
</ul></li>
</ol>
</div>
<div id="lab-session-8" class="section level2">
<h2>Lab Session 8</h2>
<ol style="list-style-type: decimal">
<li><p>Apply Holt-Winters’ multiplicative method to your retail time series data.</p>
<ul>
<li>Why is multiplicative seasonality necessary here?</li>
<li>Experiment with making the trend damped.</li>
<li>Compare the RMSE of the one-step forecasts from the two methods. Which do you prefer?</li>
<li>Check that the residuals from the best method look like white noise.</li>
</ul></li>
<li><p>Now use the same training/test split you did in Lab Session 5 to test your Holt-Winters’ forecasts on the retail data. Can you beat the seasonal naïve approach from Lab Session 5?</p></li>
</ol>
</div>
<div id="lab-session-9" class="section level2">
<h2>Lab Session 9</h2>
<ol style="list-style-type: decimal">
<li><p>Use <code>ets()</code> to find the best ETS model for your retail data.</p>
<ul>
<li>How does this model compare to the Holt-Winters’ method you applied in the previous lab session?</li>
<li>What do the smoothing parameters tell you about the trend and seasonality?</li>
</ul></li>
<li><p>Use <code>ets()</code> on some of these series:</p>
<pre class="r"><code> bicoal, chicken, dole, usdeaths, bricksq, lynx, ibmclose, eggs, ausbeer</code></pre>
<p>Does it always give good forecasts?</p></li>
<li><p>Find an example where it does not work well. Can you figure out why?</p></li>
</ol>
</div>
<div id="lab-session-10" class="section level2">
<h2>Lab Session 10</h2>
<p>To finish Day 1, we will compare the various models we have fitted to your retail data. First we will use the training/test split for the comparison. Second, we will use time series cross-validation.</p>
<ol style="list-style-type: decimal">
<li><p>The code for the forecasts for the training/test split you have already written in previous labs. Copy and paste it to do the full comparison. Which method did best?</p></li>
<li><p>For the time series cross-validation, use <code>h=12</code>. For example,</p>
<pre class="r"><code>e1 &lt;- tsCV(mytimeseries, meanf, h=12)</code></pre>
<p>A similar approach can be used for all the benchmark functions: <code>meanf()</code>, <code>naive()</code>, <code>rwf()</code>, <code>hw()</code>. But for <code>ets()</code>, we first we need to write a new function that combines <code>ets()</code> with <code>forecast()</code>.</p>
<ul>
<li>First, use <code>ets()</code> to find the best model for these data.</li>
<li><p>Then, use the following code to fit an ETS model and return forecasts. Replace ??? with the relevant details of your model.</p>
<pre class="r"><code>etsfc &lt;- function(y,h,...)
{
  ets(y,...) %&gt;% forecast(h=h)
}
e6 &lt;- tsCV(mytimeseries, etsfc, h=12, model=&quot;???&quot;, damped=???)</code></pre></li>
<li><p>Note that we are “cheating” a little bit here by fixing the model based on the entire time series, even though we are estimating the parameters of that model on every training set.</p></li>
</ul></li>
<li><p>A more realistic version would be to allow <code>etsfc</code> to select a different model every time. Just remove the <code>model</code> and <code>damped</code> arguments when you call <code>tsCV()</code>. This will take much longer, of course. Try it, and see what difference it makes to the results.</p></li>
</ol>
</div>
<div id="lab-session-11" class="section level2">
<h2>Lab Session 11</h2>
<ol style="list-style-type: decimal">
<li><p>For the following series, find an appropriate Box-Cox transformation in order to stabilize the variance.</p>
<ul>
<li><code>usnetelec</code></li>
<li><code>mcopper</code></li>
<li><code>enplanements</code></li>
<li><code>a10</code></li>
</ul></li>
<li><p>Why is a Box-Cox transformation unhelpful for the <code>cangas</code> data?</p></li>
<li><p>What Box-Cox transformation would you select for your retail data?</p></li>
</ol>
</div>
<div id="lab-session-12" class="section level2">
<h2>Lab Session 12</h2>
<p>We will use the <code>bricksq</code> data for this exercise.</p>
<ol style="list-style-type: decimal">
<li>Use an STL decomposition to calculate the trend-cycle and seasonal indices. (Experiment with having fixed or changing seasonality.)</li>
<li>Compute and plot the seasonally adjusted data.</li>
<li>Repeat with a robust STL decomposition. Does it make much difference?</li>
</ol>
</div>
<div id="lab-session-13" class="section level2">
<h2>Lab Session 13</h2>
<p>Continuing with the <code>bricksq</code> data:</p>
<ol style="list-style-type: decimal">
<li>Use a naïve method to produce forecasts of the seasonally adjusted data obtained in the last lab session.</li>
<li>Reseasonalize the results to give forecasts on the original scale.<br>
[Hint: use the <code>stlf</code> function with <code>method=&quot;naive&quot;</code>.]</li>
<li>Do the residuals look uncorrelated?</li>
</ol>
</div>
<div id="lab-session-14" class="section level2">
<h2>Lab Session 14</h2>
<ol style="list-style-type: decimal">
<li>For your retail data, try an STL decomposition applied to the Box-Cox transformed series, followed by ETS on the seasonally adjusted data. How does that compare with your best previous forecasts on the test set?</li>
</ol>
</div>
<div id="lab-session-15" class="section level2">
<h2>Lab Session 15</h2>
<ol style="list-style-type: decimal">
<li><p>For the following series, find an appropriate differencing (after transformation if necessary) to obtain stationary data.</p>
<ul>
<li><code>usnetelec</code></li>
<li><code>usgdp</code></li>
<li><code>mcopper</code></li>
<li><code>enplanements</code></li>
<li><code>visitors</code></li>
</ul></li>
<li><p>For your retail data, find the appropriate order of differencing (after transformation if necessary) to obtain stationary data.</p></li>
</ol>
</div>
<div id="lab-session-16" class="section level2">
<h2>Lab Session 16</h2>
<p>Select a time series from <code>wmurders</code>, <code>usgdp</code> and <code>mcopper</code>.</p>
<ul>
<li>if necessary, find a suitable Box-Cox transformation for the data;</li>
<li>fit a suitable ARIMA model to the transformed data using <code>auto.arima()</code>;</li>
<li>try some other plausible models by experimenting with the orders chosen;</li>
<li>choose what you think is the best model and check the residual diagnostics;</li>
<li>produce forecasts of your fitted model. Do the forecasts look reasonable?</li>
<li>compare the results with what you would obtain using <code>ets()</code> (with no transformation).</li>
</ul>
</div>
<div id="lab-session-17" class="section level2">
<h2>Lab Session 17</h2>
<ol style="list-style-type: decimal">
<li><p>For your retail time series, develop an appropriate seasonal ARIMA model, and compare the forecasts with those you obtained earlier.</p></li>
<li><p>Choose one of the following seasonal time series: <code>condmilk</code>, <code>hsales</code>, <code>uselec</code></p>
<ul>
<li>Do the data need transforming? If so, find a suitable transformation.</li>
<li>Are the data stationary? If not, find an appropriate differencing which yields stationary data.</li>
<li>Identify a couple of ARIMA models that might be useful in describing the time series. Which of your models is the best according to their AIC values?</li>
<li>Estimate the parameters of your best model and do diagnostic testing on the residuals. Do the residuals resemble white noise? If not, try to find another ARIMA model which fits better.</li>
<li>Forecast the next 24 months of data using your preferred model.</li>
<li>Compare the forecasts obtained using <code>ets()</code>.</li>
</ul></li>
</ol>
</div>
<div id="lab-session-18" class="section level2">
<h2>Lab Session 18</h2>
<p>For this exercise, we will continue to use your retail data and use time series cross-validation to compare ETS and ARIMA models.</p>
<ol style="list-style-type: decimal">
<li><p>The calculations for ETS were done in Lab Session 10.</p></li>
<li><p>Now we will repeat the exercise using an ARIMA model.</p>
<ul>
<li>Use <code>auto.arima()</code> to find the best model for these data and record the training set RMSE.</li>
<li><p>We will now check how much larger the one-step RMSE is on out-of-sample data using time series cross-validation. The following code will compute the result, beginning with four years of data in the training set. Replace <code>???</code> with the appropriate values for your ARIMA model.</p>
<pre class="r"><code>arimafc &lt;- function(y,h)
{
  y %&gt;% Arima(order=???, seasonal=???, lambda=??) %&gt;% forecast(h=h)
}
e &lt;- tsCV(mytimeseries, arimafc)
sqrt(mean(e^2, na.rm=TRUE))</code></pre></li>
<li>Plot the errors. Do they look uncorrelated and homoscedastic?</li>
<li><p>If the first few values have high variance, repeat the RMSE calculation after omitting them.</p></li>
</ul></li>
<li><p>In practice, we will not know the best model on the whole data set until we observe all the data. So a more realistic analysis would be to allow <code>auto.arima()</code> to select a different model each time through the loop.</p>
<ul>
<li>Calculate the RMSE values using this approach. (Warning: it will take a while as there are a lot of models to fit.)</li>
<li>How do the RMSE values compare? Does the re-selection of a model at each step make much difference?</li>
</ul></li>
</ol>
</div>
<div id="lab-session-19" class="section level2">
<h2>Lab Session 19</h2>
<p>This exercise concerns <code>motel</code>: the total monthly takings from accommodation and the total room nights occupied at hotels, motels, and guest houses in Victoria, Australia, between January 1980 and June 1995. Total monthly takings are in thousands of Australian dollars; total room nights occupied are in thousands.</p>
<ol style="list-style-type: decimal">
<li>Use the data to calculate the average cost of a night’s accommodation in Victoria each month.</li>
<li>Use <code>cpimel</code> to estimate the monthly CPI.</li>
<li>Produce time series plots of both variables and explain why logarithms of both variables need to be taken before fitting any models.</li>
<li>Fit an appropriate regression model with ARIMA errors. Explain your reasoning in arriving at the final model.</li>
<li>Forecast the average price per room for the next twelve months using your fitted model. (Hint: You will need to produce forecasts of the CPI figures first.)</li>
</ol>
</div>
<div id="lab-session-20" class="section level2">
<h2>Lab Session 20</h2>
<p>For your retail time series:</p>
<ul>
<li>Develop an appropriate dynamic regression model with Fourier terms for the seasonality. Use the AIC to select the number of Fourier terms to include in the model. (You will probably need to use the same Box-Cox transformation you identified previously.)</li>
<li>Check the residuals of the fitted model. Does the residual series look like white noise?</li>
<li>Compare the forecasts with those you obtained earlier using alternative models.</li>
</ul>
</div>
<div id="lab-session-21" class="section level2">
<h2>Lab Session 21</h2>
<ol style="list-style-type: decimal">
<li><p>Use the <code>tbats</code> function to model your retail time series.</p>
<ol style="list-style-type: lower-alpha">
<li>Check the residuals and produce forecasts.</li>
<li>Does this completely automated approach work for these data?</li>
<li>Have you saved any degrees of freedom by using Fourier terms rather than seasonal differencing?</li>
</ol></li>
<li><p>Consider the US finished motor gasoline products supplied (thousands of barrels per day) in the <code>gasoline</code> data set.</p>
<ol style="list-style-type: lower-alpha">
<li>Create a training set consisting of all but the last two years of data.</li>
<li>Fit a <code>tbats</code> model to the training data.</li>
<li>Check the residuals and produce forecasts.</li>
<li>Compute the accuracy of the forecasts using the test set.</li>
<li>Compare the results to those obtained using STL and dynamic harmonic regression. Which method does best for this series?</li>
</ol></li>
</ol>
</div>
<div id="lab-session-22" class="section level2">
<h2>Lab Session 22</h2>
<p>We will reconcile the forecasts for the infant deaths data. The following code can be used. Check that you understand what each step is doing.</p>
<pre class="r"><code>library(hts)
plot(infantgts)
smatrix(infantgts)

# Forecast 10-steps-ahead and reconcile the forecasts
infantforecast &lt;- forecast(infantgts, h=10)

# Plot the forecasts including only the last ten historical years
plot(infantforecast, include=10)

# set up training and testing sets
training &lt;- window(infantgts, end=1993)
test &lt;- window(infantgts, start=1994)

# Compute forecasts on training data
forecast &lt;- forecast(training, h=10)

# calculate ME, RMSE, MAE, MAPE, MPE and MASE
accuracy.gts(forecast, test)</code></pre>
<ol style="list-style-type: decimal">
<li>How would you measure overall forecast accuracy across the whole collection of time series?</li>
<li>Repeat the training/test set analysis using “bottom-up” forecasts (set <code>method=&quot;bu&quot;</code> in the <code>forecast</code> function).</li>
<li>Does the “optimal” reconciliation method work best here?</li>
</ol>
</div>
<div id="lab-session-23" class="section level2">
<h2>Lab Session 23</h2>
<p>Use <code>thief()</code> on your retail data, using ARIMA models for each aggregation. Does the temporal reconciliation lead to improved forecasts on your test set?</p>
</div>
</div>
<div id="lab-session-notes" class="section level1">
<h1>Lab Session Notes</h1>
<p>Here are the Rmd and html files I created during the workshop</p>
<ul>
<li><p>Day 1 [<a href="https://robjhyndman.com/nyc2018/Day1.Rmd">Rmd</a>] [<a href="https://robjhyndman.com/nyc2018/Day1.html">html</a>]</p></li>
<li><p>Day 2 [<a href="https://robjhyndman.com/nyc2018/Day2.Rmd">Rmd</a>] [<a href="https://robjhyndman.com/nyc2018/Day2.html">html</a>]</p></li>
<li><p>Day 3 [<a href="https://robjhyndman.com/nyc2018/Day3.Rmd">Rmd</a>] [<a href="https://robjhyndman.com/nyc2018/Day3.html">html</a>]</p></li>
</ul>
</div>
</div>
      
      
      
      
      
      
      
      
       </article>

          <hr>
        <span style="font-family: Carlito;">
        
        <a href="https://robjhyndman.com/seminars/nyc-fbtsa/"> &laquo;&nbsp;Feature-based time series analysis</a> 
        </span>
  </div>
  </div>
  </div>

    </main>
    <footer class="whatisthis">
  <hr class='separator'/>
  <span style="font-family: Carlito, sans; font-size: 0.9em; line-height: 1.05em;">
  <div class="row">
    <div class="column small-12 medium-4">
      <figure class='image-left'>
      <a href="https://robjhyndman.com/" style="border-bottom: none;">
      	<img src="https://robjhyndman.com/img/rjh.png" alt="Portrait of the author" class='avatar' style="max-width: 50%;">
      </a>
  </figure>
  <p>
Rob&nbsp;J&nbsp;Hyndman is Professor of Statistics at <a href=https://www.monash.edu>Monash University</a>, Australia, and Editor-​​in-​​Chief of the <a href=https://ijf.forecasters.org>Inter­na­tional Jour­nal of Fore­cast­ing</a>.  </p>
    </div>
    <div class="column small-12 medium-4">
      
      <h4 id="contact">Contact</h4>
      <ul class="fa-ul">
	
	<li><i class="fa-li fa fa-university" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://www.monash.edu/business/econometrics-and-business-statistics">Department of Econometrics &amp; Business Statistics, Monash University, Clayton VIC 3800, Australia.</a></li>
	
	<li><i class="fa-li fa fa-envelope" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="mailto:Rob.Hyndman@monash.edu">Rob.Hyndman@monash.edu</a></li>
	
	<li><i class="fa-li fa fa-twitter" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://twitter.com/robjhyndman">@robjhyndman</a> on Twitter</li>
	
	<li><i class="fa-li fa fa-github-alt" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://github.com/robjhyndman/">robjhyndman</a> on GitHub</li>
	
	<li><i class="fa-li ai ai-google-scholar" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://scholar.google.com/citations?user=vamErfkAAAAJ">Google Scholar</a></li>
	
      </ul>
    </div>
    <div class="column small-12 medium-4">
      <h4>Subscribe</h4>
      <p><i><i class="fa fa-rss-square" style="color:#03396c;"></i> To receive updates from this site, you can subscribe to using an <a href="http://feeds.feedburner.com/ProfessorRobJHyndman">RSS feed reader</a> or <a href="https://feedburner.google.com/fb/a/mailverify?uri=ProfessorRobJHyndman">by email</a>.</i></p>
      <h4>Search</h4>
      <a id="searchsite">
	<form method="get" action="https://duckduckgo.com/">
	  <label for="search-field" class="show-for-sr">Search the site</label>
	  <input type="search" name="q" maxlength="255" placeholder="Search the site" id="search-field">
	  <input type="hidden" name="sites" value="https://robjhyndman.com"/>
	  <input type="hidden" name="k7" value="#faf8f8"/>
	  <input type="hidden" name="kj" value="#b33"/>
	  <input type="hidden" name="ky" value="#fafafa"/>
	  <input type="hidden" name="kx" value="b"/>
	  <input type="hidden" name="ko" value="-1"/>
	  <input type="hidden" name="k1" value="-1"/>
	  <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
	</form>
      </a>
    </div>
  </div>
  </span>
</footer>

    <div class="endofpage">
    <footer id="footer">
    <section class="wrapper small">Powered by <a href="http://gohugo.io">Hugo</a>
    and <a href="https://github.com/rstudio/blogdown">Blogdown</a>.
     &copy; <a href="https://robjhyndman.com">Rob&nbsp;J&nbsp;Hyndman</a> 1993&ndash;2018.
    </section>
    </footer>
    </div>

    <script src="https://robjhyndman.com/js/jquery.js"></script>
    <script src="https://robjhyndman.com/js/what-input.js"></script>
    <script src="https://robjhyndman.com/js/foundation.min.js"></script>
    <script src="https://robjhyndman.com/js/finite.js"></script>

    
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script>
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>

    
    


<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-5004894-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

 </body>
</html>
