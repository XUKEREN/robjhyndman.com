<!doctype html>
<html class="no-js" lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Forecasting Using R (Eindhoven) | Rob J Hyndman</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans|Merriweather" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css">
    <link rel="stylesheet" href="/css/foundation.min.css">
    <link rel="stylesheet" href="/css/highlight.min.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/academicons.min.css">
    <link rel="stylesheet" href="/css/finite.css">
    <link rel="stylesheet" href="/css/kube.css">
    <link rel="stylesheet" href="/css/robjhyndman.css">
</head>
  <body>
    <header>
      <nav class="nav-bar">
	
	  <div class="title-bar" data-responsive-toggle="site-menu" data-hide-for="medium">
	    <button class="site-hamburger" type="button" data-toggle>
	      <i class="fa fa-bars fa-lg" aria-hidden="true"></i>
	    </button>
	    <div class="title-bar-title site-title">
	      <a href="/"  style="color: #b3cde0">Rob J Hyndman</a>
	    </div>
	    <div class="title-bar-right pull-right">
	      
	      
	    </div>
	  </div>

	  
	    <div class="top-bar" id="site-menu" >
	      <div class="top-bar-title show-for-medium site-title">
		<a href="/"  style="color: #b3cde0;">Rob J Hyndman</a>
	      </div>
	      <div class="top-bar-left">
		<ul class="menu vertical medium-horizontal">
		  
		  
		  <li><a href="/hyndsight/">Hyndsight blog</a></li>
		  
		  <li><a href="/publications/">Publications</a></li>
		  
		  <li><a href="/software/">Software</a></li>
		  
		  <li><a href="/seminars/">Seminars</a></li>
		  
		  <li><a href="/teaching/">Teaching</a></li>
		  
		  <li><a href="/research-team/">Research team</a></li>
		  
		  <li><a href="/about/">About</a></li>
		  
		</ul>
	      </div>
	      <div class="top-bar-right show-for-medium">
		
		
	      </div>
	    </div>
	  
	</nav>
    </header>
    <main>
      
<div class="wrapper">
<div class="units-row" style='margin-bottom: 0px;'>
<div class="unit-20">&nbsp;</div>
<div class="unit-60"><h1>Forecasting Using R (Eindhoven)</h1></div>
</div>
<div class="units-row">
  <div class="unit-20 dateblock" style='text-align: right;'>
                  19&nbsp;October&nbsp;2016<br>
                  
                   </p>
    </div>
    <div class="unit-60">
    <article class="pub" itemscope itemtype="http://schema.org/CreativeWork">
      
      <div class="pub-info">
	
      </div>
      <div class="pub-content"><p><strong>Date</strong>: 19-21 October 2016<br>
<strong>Location</strong>: Eurandom, Metaforum Building MF11-12, Department of Mathematics and Computer Science, TU Eindhoven, the Netherlands</p>
<div id="prerequisites" class="section level2">
<h2>Prerequisites</h2>
<p>Please bring your own laptop with a recent version of R installed, along with the following packages and their dependencies:</p>
<ul>
<li><code>fpp</code></li>
<li><code>ggplot2</code></li>
<li><code>magrittr</code></li>
<li><code>readxl</code></li>
<li><code>thief</code></li>
<li><code>knitr</code></li>
</ul>
<p>Participants will be assumed to be familiar with basic statistical tools such as multiple regression, but no knowledge of time series or forecasting will be assumed.</p>
</div>
<div id="reference" class="section level2">
<h2>Reference</h2>
<p><a href="http://OTexts.org/fpp" target="_new">
<img src="/eindhoven/fppcover-small.jpg" alt="alt text" />
</a></p>
</div>
<div id="need-help-with-r" class="section level2">
<h2>Need help with R?</h2>
<ul>
<li><a href="https://www.rstudio.com/wp-content/uploads/2016/10/r-cheat-sheet-3.pdf">Base R cheatsheet</a></li>
<li><a href="https://www.datacamp.com/courses/free-introduction-to-r">Datacamp: Introduction to R course</a></li>
<li><a href="http://rmarkdown.rstudio.com/lesson-2.html">Help with Rmarkdown</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf">Rmarkdown cheatsheet</a> [<a href="https://www.rstudio.com/wp-content/uploads/2015/06/RMarkdown-dutch.pdf">Dutch translation</a>]</li>
</ul>
</div>
<div id="program" class="section level2">
<h2>Program</h2>
<div id="wednesday-19-october" class="section level3">
<h3>Wednesday 19 October</h3>
<table border=1 cellpadding=2 cellspacing=5 width=100%>
<col width="15%">
<col width="70%">
<col width="15%">
<tr>
<td>
09.30 - 10.00
</td>
<td>
Registration and welcome
</td>
<td>
<a href="/eindhoven/1-0-intro.pdf" target="_new">Slides</a>
</td>
</tr>
<tr>
<td>
10.00 - 11.30
</td>
<td>
Time series and R, Time series graphics
</td>
<td>
<a href="/eindhoven/1-1-Graphics.pdf" target="_new">Slides</a>
</td>
</tr>
<tr>
<td>
11.30 - 11.45
</td>
<td>
<em>Break</em>
</td>
</tr>
<tr>
<td>
11.45 - 13.00
</td>
<td>
The forecaster’s toolbox
</td>
<td>
<a href="/eindhoven/1-2-Toolbox.pdf" target="_new">Slides</a>
</td>
</tr>
<tr>
<td>
13.00 - 14.00
</td>
<td>
<em>Lunch</em>
</td>
</tr>
<tr>
<td>
14.00 - 15.30
</td>
<td>
Seasonality and trends
</td>
<td>
<a href="/eindhoven/1-3-Seasonality.pdf" target="_new">Slides</a>
</td>
</tr>
<tr>
<td>
15.30 - 15.45
</td>
<td>
<em>Break</em>
</td>
</tr>
<tr>
<td>
15.45 - 17.00
</td>
<td>
Exponential smoothing
</td>
<td>
<a href="/eindhoven/1-4-ExponentialSmoothing.pdf" target="_new">Slides</a>
</td>
</tr>
</table>
</div>
<div id="thursday-20-october" class="section level3">
<h3>Thursday 20 October</h3>
<table border=1 cellpadding=2 cellspacing=5 width=100%>
<col width="15%">
<col width="70%">
<col width="15%">
<tr>
<td>
10.00 - 11.30
</td>
<td>
ETS and state space models
</td>
<td>
<a href="/eindhoven/2-1-StateSpace.pdf" target="_new">Slides</a>
</td>
</tr>
<tr>
<td>
11.30 - 11.45
</td>
<td>
<em>Break</em>
</td>
</tr>
<tr>
<td>
11.45 - 13.00
</td>
<td>
Transformations and differencing
</td>
<td>
<a href="/eindhoven/2-2-Transformations.pdf" target="_new">Slides1</a>
<a href="/eindhoven/2-3-Differencing.pdf" target="_new">Slides2</a>
</td>
</tr>
<tr>
<td>
13.00 - 14.00
</td>
<td>
<em>Lunch</em>
</td>
</tr>
<tr>
<td>
14.00 - 15.30
</td>
<td>
Non-seasonal ARIMA models
</td>
<td>
<a href="/eindhoven/2-4-NonseasonalARIMA.pdf" target="_new">Slides</a>
</td>
</tr>
<tr>
<td>
15.30 - 15.45
</td>
<td>
<em>Break</em>
</td>
</tr>
<tr>
<td>
15.45 - 17.00
</td>
<td>
Seasonal ARIMA models
</td>
<td>
<a href="/eindhoven/2-5-SeasonalARIMA.pdf" target="_new">Slides</a>
</td>
</tr>
</table>
</div>
<div id="friday-21-october" class="section level3">
<h3>Friday 21 October</h3>
<table border=1 cellpadding=2 cellspacing=5 width=100%>
<col width="15%">
<col width="70%">
<col width="15%">
<tr>
<td>
10.00 - 11.30
</td>
<td>
Time series cross-validation, Dynamic regression
</td>
<td>
<a href="/eindhoven/3-1-Cross-validation.pdf" target="_new">Slides1</a>
<a href="/eindhoven/3-2-Dynamic-Regression.pdf" target="_new">Slides2</a>
</td>
</tr>
<tr>
<td>
11.30 - 11.45
</td>
<td>
<em>Break</em>
</td>
</tr>
<tr>
<td>
11.45 - 13.00
</td>
<td>
Hierarchical forecasting
</td>
<td>
<a href="/eindhoven/3-3-Hierarchical.pdf" target="_new">Slides</a>
</td>
</tr>
<tr>
<td>
13.00 - 14.00
</td>
<td>
<em>Lunch</em>
</td>
</tr>
<tr>
<td>
14.00 - 15.30
</td>
<td>
VAR, TBATS and NNAR models
</td>
<td>
<a href="/eindhoven/3-4-Advanced.pdf" target="_new">Slides</a>
</td>
</tr>
<tr>
<td>
15.30 - 15.45
</td>
<td>
<em>Break</em>
</td>
</tr>
<tr>
<td>
15.45 - 16.30
</td>
<td>
Final comments, questions and discussion
</td>
<td>
<a href="/eindhoven/Final-Comments.pdf" target="_new">Slides</a>
</td>
</tr>
</table>
</div>
</div>
<div id="lab-sessions" class="section level2">
<h2>Lab sessions</h2>
<p>Download the following two Rmarkdown files for recording your lab session exercises:</p>
<ul>
<li><a href="/eindhoven/Retail.Rmd"><code>Retail.Rmd</code></a></li>
<li><a href="/eindhoven/OtherData.Rmd"><code>OtherData.Rmd</code></a></li>
</ul>
<p>Use these to record your answers to all lab session exercises. Use <code>Retail.Rmd</code> for all questions involving the retail data introduced in the first lab session, and the other file for the remaining exercises.</p>
<div id="lab-session-1" class="section level3">
<h3>Lab Session 1</h3>
<ol style="list-style-type: decimal">
<li><p>Download the <a href="https://robjhyndman.com/data/retail.xlsx">monthly Australian retail data</a>. These represent retail sales in various categories for different Australian states.</p></li>
<li><p>Read the data into R and choose <em>one</em> of the series. This time series will be used throughout the short course in lab sessions.</p>
<p>Please script this, don’t just use the Rstudio click-and-point interface. That way you can save the results for easy replication later.</p>
<p>You will need the <code>read_excel</code> function from the <code>readxl</code> package:</p>
<pre class="r"><code>retaildata &lt;- readxl::read_excel(&quot;retail.xlsx&quot;, skip = 1)
mytimeseries &lt;- ts(retaildata[[&quot;A3349873A&quot;]], frequency=12, start=c(1982,4))
autoplot(mytimeseries)</code></pre>
<p>[Replace the column name with your own chosen column.]</p></li>
</ol>
</div>
<div id="lab-session-2" class="section level3">
<h3>Lab Session 2</h3>
<ol style="list-style-type: decimal">
<li>The following graphics functions have been introduced:</li>
</ol>
<pre><code>```r
autoplot, ggseasonplot, ggmonthplot, gglagplot, ggAcf, ggtsdisplay
```

Explore your chosen retail time series using these functions. Can you spot any seasonality, cyclicity and trend? What do you learn about the series?</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Repeat for some of the following series:</li>
</ol>
<pre><code>```r
bicoal, chicken, dole, usdeaths, bricksq, lynx, ibmclose
```

Use the help files to find out what the series are.</code></pre>
</div>
<div id="lab-session-3" class="section level3">
<h3>Lab Session 3</h3>
<ol style="list-style-type: decimal">
<li><p>Calculate the residuals from a seasonal naïve forecast applied to quarterly Australian beer production from 1992.</p>
<pre class="r"><code>beer &lt;- window(ausbeer, start=1992)
fc &lt;- snaive(beer)
autoplot(fc)
res &lt;- residuals(fc)</code></pre></li>
<li><p>Test if the residuals are white noise.</p></li>
</ol>
<pre><code>```r
ggtsdisplay(res, plot.type=&#39;scatter&#39;)
Box.test(res, lag=8, fitdf=0, type=&quot;Lj&quot;)
```

What do you conclude?</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Check if the residuals are normally distributed.</li>
</ol>
<pre><code>```r
qplot(res)
```

What do you conclude?</code></pre>
</div>
<div id="lab-session-4" class="section level3">
<h3>Lab Session 4</h3>
<p>For your retail time series:</p>
<ol style="list-style-type: decimal">
<li><p>Split the data into two parts using</p>
<pre class="r"><code>x1 &lt;- window(mytimeseries, end=c(2010,12))
x2 &lt;- window(mytimeseries, start=2011)</code></pre></li>
<li><p>Check that your data have been split appropriately by producing the following plot.</p>
<pre class="r"><code>autoplot(cbind(Training=x1,Test=x2))</code></pre></li>
<li><p>Calculate forecasts using <code>snaive</code> applied to <code>x1</code>.</p></li>
<li><p>Compare the accuracy of your forecasts against the actual values stored in <code>x2</code>.</p>
<pre class="r"><code>f1 &lt;- snaive(x1)
accuracy(f1,x2)</code></pre></li>
<li><p>Compute the residuals and plot them.</p>
<pre class="r"><code>res &lt;- residuals(f1)
ggtsdisplay(res)
Box.test(res, lag=24, fitdf=0, type=&quot;Lj&quot;)
qplot(res)</code></pre>
<p>Do the residuals appear to be uncorrelated and normally distributed?</p></li>
<li><p>How sensitive are the accuracy measures to the training/test split?</p></li>
</ol>
</div>
<div id="lab-session-5" class="section level3">
<h3>Lab Session 5</h3>
<p>We will use the <code>bricksq</code> data for this exercise.</p>
<ol style="list-style-type: decimal">
<li>Use an STL decomposition to calculate the trend-cycle and seasonal indices. (Experiment with having fixed or changing seasonality.)</li>
<li>Compute and plot the seasonally adjusted data.</li>
<li>Use a naïve method to produce forecasts of the seasonally adjusted data.</li>
<li>Reseasonalize the results to give forecasts on the original scale.<br>
[Hint: use the <code>stlf</code> function with <code>method=&quot;naive&quot;</code>.]</li>
<li>Do the residuals look uncorrelated?</li>
<li>Repeat with a robust STL decomposition. Does it make much difference?</li>
</ol>
</div>
<div id="lab-session-6" class="section level3">
<h3>Lab Session 6</h3>
<ol style="list-style-type: decimal">
<li><p>For this exercise, use the price of a dozen eggs in the United States
from 1900–1993 (data set <code>eggs</code>).</p>
<ul>
<li>Use SES and Holt’s method (with and without damping) to forecast “future” data.<br>
[Hint: use <code>h=100</code> so you can clearly see the differences between the options when plotting the forecasts.]</li>
<li>Which method gives the best training RMSE?</li>
<li>Are these RMSE values comparable?</li>
<li>Do the residuals from the best fitting method look like white noise?</li>
</ul></li>
</ol>
</div>
<div id="lab-session-7" class="section level3">
<h3>Lab Session 7</h3>
<ol style="list-style-type: decimal">
<li><p>Now we will apply Holt-Winters’ multiplicative method to your retail time series data.</p>
<ul>
<li>Why is multiplicative seasonality necessary here?</li>
<li>Experiment with making the trend damped.</li>
<li>Compare the RMSE of the one-step forecasts from the two methods. Which do you prefer?</li>
<li>Check that the residuals from the best method look like white noise.</li>
</ul></li>
<li><p>Now use the same training/test split you did in Lab Session 4 to test your Holt-Winters’ forecasts on the retail data. Can you beat the seasonal naïve approach from Lab Session 4?</p></li>
</ol>
</div>
<div id="lab-session-8" class="section level3">
<h3>Lab Session 8</h3>
<ol style="list-style-type: decimal">
<li><p>Use <code>ets()</code> to find the best ETS model for your retail data.</p>
<ul>
<li>How does this model compare to the Holt-Winters’ method you applied in the previous lab session?</li>
<li>What do the smoothing parameters tell you about the trend and seasonality?</li>
</ul></li>
<li><p>Use <code>ets()</code> on some of these series:</p>
<pre class="r"><code> bicoal, chicken, dole, usdeaths, bricksq, lynx, ibmclose, eggs, bricksq, ausbeer</code></pre>
<p>Does it always give good forecasts?</p></li>
<li><p>Find an example where it does not work well. Can you figure out why?</p></li>
</ol>
</div>
<div id="lab-session-9" class="section level3">
<h3>Lab Session 9</h3>
<ol style="list-style-type: decimal">
<li><p>For the following series, find an appropriate Box-Cox transformation in order to stabilize the variance.</p>
<ul>
<li><code>usnetelec</code></li>
<li><code>usgdp</code></li>
<li><code>mcopper</code></li>
<li><code>enplanements</code></li>
</ul></li>
<li><p>Why is a Box-Cox transformation unhelpful for the <code>cangas</code> data?</p></li>
<li><p>What Box-Cox transformation would you select for your retail data?</p></li>
<li><p>For the same retail data, try an STL decomposition applied to the Box-Cox transformed series, followed by ETS on the seasonally adjusted data. How does that compare with your best previous forecasts on the test set?</p></li>
</ol>
</div>
<div id="lab-session-10" class="section level3">
<h3>Lab Session 10</h3>
<ol style="list-style-type: decimal">
<li><p>For the following series, find an appropriate differencing (after transformation if necessary) to obtain stationary data.</p>
<ul>
<li><code>usnetelec</code></li>
<li><code>usgdp</code></li>
<li><code>mcopper</code></li>
<li><code>enplanements</code></li>
<li><code>visitors</code></li>
</ul></li>
<li><p>For your retail data, find the appropriate order of differencing (after transformation if necessary) to obtain stationary data.</p></li>
</ol>
</div>
<div id="lab-session-11" class="section level3">
<h3>Lab Session 11</h3>
<p>Select a time series from <code>wmurders</code>, <code>usgdp</code> and <code>mcopper</code>.</p>
<ul>
<li>if necessary, find a suitable Box-Cox transformation for the data;</li>
<li>fit a suitable ARIMA model to the transformed data using <code>auto.arima()</code>;</li>
<li>try some other plausible models by experimenting with the orders chosen;</li>
<li>choose what you think is the best model and check the residual diagnostics;</li>
<li>produce forecasts of your fitted model. Do the forecasts look reasonable?</li>
<li>compare the results with what you would obtain using <code>ets()</code> (with no transformation).</li>
</ul>
</div>
<div id="lab-session-12" class="section level3">
<h3>Lab Session 12</h3>
<ol style="list-style-type: decimal">
<li><p>For your retail time series, develop an appropriate seasonal ARIMA model, and compare the forecasts with those you obtained earlier.</p></li>
<li><p>Obtain up-to-date retail data from the <a href="https://goo.gl/HdrV0G">ABS website (Cat. 8501.0, Table 11)</a>, and compare your forecasts with the actual numbers. How good were the forecasts from the various models?</p></li>
<li><p>Choose one of the following seasonal time series: <code>condmilk</code>, <code>hsales</code>, <code>uselec</code></p>
<ul>
<li>Do the data need transforming? If so, find a suitable transformation.</li>
<li>Are the data stationary? If not, find an appropriate differencing which yields stationary data.</li>
<li>Identify a couple of ARIMA models that might be useful in describing the time series. Which of your models is the best according to their AIC values?</li>
<li>Estimate the parameters of your best model and do diagnostic testing on the residuals. Do the residuals resemble white noise? If not, try to find another ARIMA model which fits better.</li>
<li>Forecast the next 24 months of data using your preferred model.</li>
<li>Compare the forecasts obtained using <code>ets()</code>.</li>
</ul></li>
</ol>
</div>
<div id="lab-session-13" class="section level3">
<h3>Lab Session 13</h3>
<ol style="list-style-type: decimal">
<li>For this exercise, we will continue to use your retail data.</li>
</ol>
<ul>
<li>Use <code>ets</code> to find the best model for these data and record the training set RMSE.</li>
<li><p>We will now check how much larger the one-step RMSE is on out-of-sample data using time series cross-validation. The following code will compute the
result, beginning with four years of data in the training set. Replace <code>???</code> with the appropriate values for your ETS model.</p>
<pre class="r"><code>k &lt;- 48 # minimum size for training set
n &lt;- length(mytimeseries) # Total number of observations
e &lt;- mytimeseries*NA # Vector to record one-step forecast errors
for(i in 48:(n-1))
{
  train &lt;- ts(mytimeseries[1:i],freq=12)
  fit &lt;- ets(train, model=???, damped=???)
  fc &lt;- forecast(fit,h=1)$mean
  e[i] &lt;- mytimeseries[i+1]-fc
}
sqrt(mean(e^2,na.rm=TRUE))</code></pre></li>
<li><p>What would happen in the above loop if I had set <code>train &lt;- mytimeseries[1:i]</code>?</p></li>
<li><p>Plot <code>e</code> using <code>ggtsdisplay</code>. Do they look uncorrelated and homoscedastic?</p></li>
<li><p>In practice, we will not know the best model on the whole data set until we observe all the data. So a more realistic analysis would be to allow <code>ets</code> to select a different model each time through the loop. Calculate the RMSE using this approach. (Warning: it will take a while as there are a lot of models to fit.)</p></li>
<li><p>How do the RMSE values compare? Does the re-selection of a model at each step make much difference?</p></li>
</ul>
</div>
<div id="lab-session-14" class="section level3">
<h3>Lab Session 14</h3>
<p>For your retail time series:</p>
<ul>
<li>Develop an appropriate dynamic regression model with Fourier terms for the seasonality. Use the AIC to select the number of Fourier terms to include in the model. (You will probably need to use the same Box-Cox transformation you identified previously.)</li>
<li>Check the residuals of the fitted model. Does the residual series look like white noise?</li>
<li>Compare the forecasts with those you obtained earlier using alternative models.</li>
</ul>
<!--
## Lab Session 15

* This exercise concerns the total monthly takings from accommodation and the total room nights occupied at hotels, motels, and guest houses in Victoria, Australia, between January 1980 and June 1995 (Data set `motel`). Total monthly takings are in thousands of Australian dollars; total room nights occupied are in thousands.

* Use the data to calculate the average cost of a night's accommodation in Victoria each month.

* Plot this cost time series against CPI.

* Produce time series plots of both variables and explain why logarithms of both variables need to be taken before fitting any models.

* Fit an appropriate regression model with ARIMA errors.

* Forecast the average price per room for the next twelve months using your fitted model. (Hint: You will need to produce forecasts of the CPI figures first.)
 -->
</div>
<div id="lab-session-15" class="section level3">
<h3>Lab Session 15</h3>
<p>We will reconcile the forecasts for the infant deaths data. The following code can be used. Check that you understand what each step is doing.</p>
<pre class="r"><code>library(hts)
plot(infantgts)
smatrix(infantgts)

# Forecast 10-step-ahead and reconcile the forecasts
infantforecast &lt;- forecast(infantgts, h=10)

# Plot the forecasts including the last ten historical years
plot(infantforecast, include=10)

# Create a matrix of all aggregated time series
allts_infant &lt;- aggts(infantgts)

# Forecast all series using ARIMA models
allf &lt;- matrix(, nrow=10, ncol=ncol(allts_infant))
for(i in 1:ncol(allts_infant))
  allf[,i] &lt;- forecast(auto.arima(allts_infant[,i]), h=10)$mean
allf &lt;- ts(allf, start=2004)

# combine the forecasts with the group matrix to get a gts object
y.f &lt;- combinef(allf, groups = infantgts$groups)

# set up training and testing samples
data &lt;- window(infantgts, end=1993)
test &lt;- window(infantgts, start=1994)

# Compute forecasts on training data
forecast &lt;- forecast(data, h=10)

# calculate ME, RMSE, MAE, MAPE, MPE and MASE
accuracy.gts(forecast, test)</code></pre>
<ol style="list-style-type: decimal">
<li><p>How would you measure overall forecast accuracy across the whole collection of time series?</p></li>
<li><p>Repeat the training/test set analysis using “bottom-up” forecasts (set <code>method=&quot;bu&quot;</code> in the <code>forecast</code> function).</p></li>
<li><p>Does the ``optimal’’ reconciliation method work best here?</p></li>
</ol>
</div>
<div id="lab-session-16" class="section level3">
<h3>Lab Session 16</h3>
<p>Use <code>thief()</code> on your retail data, using ARIMA models for each aggregation. Does the temporal reconciliation lead to improved forecasts on your test set?</p>
</div>
<div id="lab-session-17" class="section level3">
<h3>Lab Session 17</h3>
<ol style="list-style-type: decimal">
<li><p>Use the <code>tbats</code> function to model your retail time series.</p>
<ol style="list-style-type: lower-alpha">
<li>Check the residuals and produce forecasts.</li>
<li>Does this completely automated approach work for these data?</li>
<li>Have you saved any degrees of freedom by using Fourier terms rather than seasonal differencing?</li>
</ol></li>
<li><p>The following code will read weekly data on US finished motor gasoline products supplied (thousands of barrels per day):</p>
<pre class="r"><code>gas &lt;- read.csv(&quot;https://robjhyndman.com/data/gasoline.csv&quot;)[,1]
gas &lt;- ts(gas, start=1991+31/365.25, frequency = 365.25/7)</code></pre>
<ol style="list-style-type: lower-alpha">
<li>Fit a <code>tbats</code> model to these data.</li>
<li>Check the residuals and produce forecasts.</li>
<li>Could you model these data using any of the other methods we have considered in this course?</li>
</ol></li>
</ol>
</div>
<div id="lab-session-18" class="section level3">
<h3>Lab Session 18</h3>
<p>Experiment with using <code>nnetar()</code> on your retail data and other data we have considered in previous lab sessions.</p>
</div>
<div id="lab-session-19" class="section level3">
<h3>Lab Session 19</h3>
<p>Over this short-course, you have developed several models for your Australian retail data. The last exercise is to use cross-validation to objectively compare the models you have developed. Compute cross-validated RMSE values for each of the time series models you have considered. It will take some time to run, so perhaps leave it running overnight and check the results tomorrow.</p>
</div>
</div>
</div>
      
      
      
      
      
      
      
      
       </article>

          <hr>
        <span style="font-family: Carlito;">
        
        <a href="/seminars/erum2016/"> &laquo;&nbsp;Reconciling forecasts: the hts and thief packages</a>  | <a href="/seminars/melbuni-smartgrids/">Probabilistic energy forecasting for smart grids and buildings&nbsp;&raquo; </a>
        
        </span>
  </div>
  </div>
  </div>

    </main>
    <footer class="whatisthis">
  <hr class='separator'/>
  <span style="font-family: Carlito, sans; font-size: 0.9em; line-height: 1.05em;">
  <div class="row">
    <div class="column small-12 medium-4">
      <figure class='image-left'>
      <a href="/" style="border-bottom: none;">
      	<img src="/img/rjh.png" alt="Portrait of the author" class='avatar' style="max-width: 50%;">
      </a>
  </figure>
  <p>
Rob&nbsp;J&nbsp;Hyndman is Professor of Statistics at <a href=https://www.monash.edu>Monash University</a>, Australia, and Editor-​​in-​​Chief of the <a href=https://ijf.forecasters.org>Inter­na­tional Jour­nal of Fore­cast­ing</a>.  </p>
    </div>
    <div class="column small-12 medium-4">
      
      <h4 id="contact">Contact</h4>
      <ul class="fa-ul">
	
	<li><i class="fa-li fa fa-university" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://www.monash.edu/business/econometrics-and-business-statistics">Department of Econometrics &amp; Business Statistics, Monash University, Clayton VIC 3800, Australia.</a></li>
	
	<li><i class="fa-li fa fa-envelope" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="mailto:Rob.Hyndman@monash.edu">Rob.Hyndman@monash.edu</a></li>
	
	<li><i class="fa-li fa fa-twitter" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://twitter.com/robjhyndman">@robjhyndman</a> on Twitter</li>
	
	<li><i class="fa-li fa fa-github-alt" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://github.com/robjhyndman/">robjhyndman</a> on GitHub</li>
	
	<li><i class="fa-li ai ai-google-scholar" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://scholar.google.com/citations?user=vamErfkAAAAJ">Google Scholar</a></li>
	
      </ul>
    </div>
    <div class="column small-12 medium-4">
      <h4>Subscribe</h4>
      <p><i><i class="fa fa-rss-square" style="color:#03396c;"></i> To receive updates from this site, you can subscribe to using an <a href="http://feeds.feedburner.com/ProfessorRobJHyndman">RSS feed reader</a> or <a href="https://feedburner.google.com/fb/a/mailverify?uri=ProfessorRobJHyndman">by email</a>.</i></p>
      <h4>Search</h4>
      <a id="searchsite">
	<form method="get" action="https://duckduckgo.com/">
	  <label for="search-field" class="show-for-sr">Search the site</label>
	  <input type="search" name="q" maxlength="255" placeholder="Search the site" id="search-field">
	  <input type="hidden" name="sites" value="https://robjhyndman.com"/>
	  <input type="hidden" name="k7" value="#faf8f8"/>
	  <input type="hidden" name="kj" value="#b33"/>
	  <input type="hidden" name="ky" value="#fafafa"/>
	  <input type="hidden" name="kx" value="b"/>
	  <input type="hidden" name="ko" value="-1"/>
	  <input type="hidden" name="k1" value="-1"/>
	  <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
	</form>
      </a>
    </div>
  </div>
  </span>
</footer>

    <div class="endofpage">
    <footer id="footer">
    <section class="wrapper small">Powered by <a href="http://gohugo.io">Hugo</a>
    and <a href="https://github.com/rstudio/blogdown">Blogdown</a>.
     &copy; <a href="https://robjhyndman.com">Rob&nbsp;J&nbsp;Hyndman</a> 1993&ndash;2018.
    </section>
    </footer>
    </div>

    <script src="/js/jquery.js"></script>
    <script src="/js/what-input.js"></script>
    <script src="/js/foundation.min.js"></script>
    <script src="/js/finite.js"></script>

    
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

    <script>
    hljs.configure({languages: []});
    hljs.initHighlightingOnLoad();
    </script>

    
    


<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-5004894-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

 </body>
</html>
