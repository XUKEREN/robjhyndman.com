<!doctype html>
<html class="no-js" lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>forecast 8.0 | Rob J Hyndman</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans|Merriweather" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/foundation.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/highlight.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/academicons.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/finite.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/kube.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/robjhyndman.css">
  </head>
  <body>
    <header>
      <nav class="nav-bar">
	
	  <div class="title-bar" data-responsive-toggle="site-menu" data-hide-for="medium">
	    <button class="site-hamburger" type="button" data-toggle>
	      <i class="fa fa-bars fa-lg" aria-hidden="true"></i>
	    </button>
	    <div class="title-bar-title site-title">
	      <a href="https://robjhyndman.com/"  style="color: #b3cde0">Rob J Hyndman</a>
	    </div>
	    <div class="title-bar-right pull-right">
	      


	    </div>
	  </div>

	  
	    <div class="top-bar" id="site-menu" >
	      <div class="top-bar-title show-for-medium site-title">
		<a href="https://robjhyndman.com/"  style="color: #b3cde0;">Rob J Hyndman</a>
	      </div>
	      <div class="top-bar-left">
		<ul class="menu vertical medium-horizontal">
		  
		  
		  <li><a href="https://robjhyndman.com/hyndsight/">Hyndsight blog</a></li>
		  
		  <li><a href="https://robjhyndman.com/publications/">Publications</a></li>
		  
		  <li><a href="https://robjhyndman.com/software/">Software</a></li>
		  
		  <li><a href="https://robjhyndman.com/seminars/">Seminars</a></li>
		  
		  <li><a href="https://robjhyndman.com/teaching/">Teaching</a></li>
		  
		  <li><a href="https://robjhyndman.com/research-team/">Research team</a></li>
		  
		  <li><a href="https://robjhyndman.com/about/">About</a></li>
		  
		</ul>
	      </div>
	      <div class="top-bar-right show-for-medium">
		


	      </div>
	    </div>
	  
	</nav>
    </header>
    <main>
      

<div class="wrapper">
<div class="units-row" style='margin-bottom: 0px;'>
<div class="unit-20">&nbsp;</div>
<div class="unit-60"><h1>forecast 8.0</h1></div>
</div>
<div class="units-row">
  <div class="unit-20 dateblock" style='text-align: right;'><h4 style='padding: .8ex 0px .8ex 0px;'><a href="https://robjhyndman.com/hyndsight">Hyndsight</a></h4>
      <div class="post-metadata">
  <span class="post-date">
    <time datetime="2017-02-28 14:00:53 &#43;0000 &#43;0000" itemprop="datePublished">28 February 2017</time>
  </span>
  
  
  
  <span class="post-tags">
    <p><i class="fa fa-tags"></i>
    
    <a class="post-tag" href="https://robjhyndman.com/categories/forecasting">forecasting</a>,
     
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/graphics">graphics</a>, 
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/r">R</a>, 
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/time-series">time series</a>
    
  </span>
  
  
</div>

    </div>
<div class="unit-60">

  <p>In what is now a roughly annual event, the forecast package has been updated on CRAN with a new version, this time 8.0.</p>
<p>A few of the more important new features are described below.</p>
<div id="check-residuals" class="section level2">
<h2>Check residuals</h2>
<p>A common task when building forecasting models is to check that the residuals satisfy some assumptions (that they are uncorrelated, normally distributed, etc.). The new function <code>checkresiduals</code> makes this very easy: it produces a time plot, an ACF, a histogram with super-imposed normal curve, and does a Ljung-Box test on the residuals with appropriate number of lags and degrees of freedom.</p>
<pre class="r"><code>library(forecast)    
fit &lt;- auto.arima(WWWusage)
checkresiduals(fit)</code></pre>
<p><img src="https://robjhyndman.com/hyndsight/2017-02-28-forecast8_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre><code>## 
##  Ljung-Box test
## 
## data:  Residuals from ARIMA(1,1,1)
## Q* = 7.8338, df = 8, p-value = 0.4499
## 
## Model df: 2.   Total lags used: 10</code></pre>
<p>This should work for all the modelling functions in the package, as well as some of the time series modelling functions in the <code>stats</code> package.</p>
</div>
<div id="different-types-of-residuals" class="section level2">
<h2>Different types of residuals</h2>
<p>Usually, residuals are computed as the difference between observations and the corresponding one-step forecasts. But for some models, residuals are computed differently; for example, a multiplicative ETS model or a model with a Box-Cox transformation. So the <code>residuals()</code> function now has an additional argument to deal with this situation.</p>
<p>“Innovation residuals”&quot; correspond to the white noise process that drives the evolution of the time series model. “Response residuals” are the difference between the observations and the fitted values (as with GLMs). For homoscedastic models, the innovation residuals and the one-step response residuals are identical. “Regression residuals” are also available for regression models with ARIMA errors, and are equal to the original data minus the effect of the regression variables. If there are no regression variables, the errors will be identical to the original series (possibly adjusted to have zero mean).</p>
<pre class="r"><code>library(ggplot2)
fit &lt;- ets(woolyrnq)
res &lt;- cbind(Residuals = residuals(fit), 
             Response.residuals = residuals(fit, type=&#39;response&#39;))
autoplot(res, facets=TRUE)</code></pre>
<p><img src="https://robjhyndman.com/hyndsight/2017-02-28-forecast8_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="some-new-graphs" class="section level2">
<h2>Some new graphs</h2>
<p>The <code>geom_histogram()</code> function in the <code>ggplot2</code> package is nice, but it does not have a good default binwidth. So I added the <code>gghistogram</code> function which provides a quick histogram with good defaults. You can also overlay a normal density curve or a kernel density estimate.</p>
<pre class="r"><code>gghistogram(lynx)</code></pre>
<p><img src="https://robjhyndman.com/hyndsight/2017-02-28-forecast8_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The <code>ggseasonplot</code> function is useful for studying seasonal patterns and how they change over time. It now has a <code>polar</code> argument to create graphs like this.</p>
<pre class="r"><code>ggseasonplot(USAccDeaths, polar=TRUE)</code></pre>
<p><img src="https://robjhyndman.com/hyndsight/2017-02-28-forecast8_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>I often want to add a time series line to an existing plot. Base graphics has <code>line()</code> which works well when a time series is passed as an argument. So I added <code>autolayer</code> which is similar (but more general). It is an S3 method like <code>autoplot</code>, and adds a layer to an existing <code>ggplot</code> object. <code>autolayer</code> will eventually form part of the next release of <code>ggplot2</code>, but for now it is available in the <code>forecast</code> package. There are methods provided for <code>ts</code> and <code>forecast</code> objects:</p>
<pre class="r"><code>WWWusage %&gt;% ets %&gt;% forecast(h=20) -&gt; fc
autoplot(WWWusage, series=&quot;Data&quot;) + 
  autolayer(fc, series=&quot;Forecast&quot;) + 
  autolayer(fitted(fc), series=&quot;Fitted&quot;)</code></pre>
<p><img src="https://robjhyndman.com/hyndsight/2017-02-28-forecast8_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="cross-validation" class="section level2">
<h2>Cross-validation</h2>
<p>The <code>tsCV</code> and <code>CVar</code> functions have been added. These were discussed in a <a href="https://robjhyndman.com/hyndsight/tscv/">previous post</a>.</p>
</div>
<div id="bagged-ets" class="section level2">
<h2>Bagged ETS</h2>
<p>The <code>baggedETS</code> function has been added, which implements the procedure discussed in <a href="https://robjhyndman.com/publications/bagging-ets/">Bergmeir et al (2016)</a> for bagging ETS forecasts.</p>
</div>
<div id="head-and-tail-of-time-series" class="section level2">
<h2>head and tail of time series</h2>
<p>I’ve long found it annoying that <code>head</code> and <code>tail</code> do not work on multiple time series. So I added some functions to the package so they now work.</p>
</div>
<div id="imports-and-dependencies" class="section level2">
<h2>Imports and Dependencies</h2>
<p>The pipe operator from the <code>magrittr</code> package is now imported. So you don’t need to load the <code>magrittr</code> package to use it.</p>
<p>There are now no packages that are loaded with <code>forecast</code> – everything required is imported. This makes the start up much cleaner (no more annoying messages from all those packages being loaded). Instead, some random tips are occasionally printed when you load the forecast package (much like <code>ggplot2</code> does).</p>
<p>There is quite a bit more — see the <a href="http://pkg.robjhyndman.com/forecast/news/">Changelog</a> for a list.</p>
</div>


      <meta itemprop="wordCount" content="651">
      <meta itemprop="datePublished" content="2017-02-28">
      <meta itemprop="url" content="https://robjhyndman.com/hyndsight/forecast8/">

<div class='sans' style="background: #dddddd; padding: 2em;">
<div style="padding-bottom: 1em" >
<div class="share-box">
  <ul class="share">
    <li>
      <a class="facebook" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2frobjhyndman.com%2fhyndsight%2fforecast8%2f" target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter" href="https://twitter.com/intent/tweet?text=forecast%208.0. https%3a%2f%2frobjhyndman.com%2fhyndsight%2fforecast8%2f from @robjhyndman" target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frobjhyndman.com%2fhyndsight%2fforecast8%2f&amp;title=forecast%208.0" target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo" href="http://service.weibo.com/share/share.php?url=https%3a%2f%2frobjhyndman.com%2fhyndsight%2fforecast8%2f&amp;title=forecast%208.0" target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email" href="mailto:?subject=forecast%208.0&amp;body=https%3a%2f%2frobjhyndman.com%2fhyndsight%2fforecast8%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


</div>

    <ul class="pagination" role="navigation" aria-label="Pagination">
      
      <li class="arrow" aria-disabled="true"><a href="https://robjhyndman.com/hyndsight/invited-sessions-at-isf2017/">&laquo; <em>Previous<span class="show-for-sr"> page</span></em>: Invited sessions at ISF2017</a></li>
      
      
      <li class="arrow" aria-disabled="true"><a href="https://robjhyndman.com/hyndsight/ijf-nominations1415/"><em>Next<span class="show-for-sr"> page</span></em>: IJF Best Paper Award 2014-2015&nbsp;&raquo;</a></li>
      
    </ul>
    <a href="https://robjhyndman.com/hyndsight/">All Hyndsight posts by date</a>
</div>

<span style='font-family: Carlito'>
 <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
              return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'researchtips';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</span>

  </div>
  </div></div>

    </main>
    <footer class="whatisthis">
  <hr class='separator'/>
  <span style="font-family: Carlito, sans; font-size: 0.9em; line-height: 1.05em;">
  <div class="row">
    <div class="column small-12 medium-4">
      <figure class='image-left'>
      <a href="https://robjhyndman.com/" style="border-bottom: none;">
      	<img src="https://robjhyndman.com/img/rjh.png" alt="Portrait of the author" class='avatar' style="max-width: 50%;">
      </a>
  </figure>
  <p>
Rob&nbsp;J&nbsp;Hyndman is Professor of Statistics at <a href=https://www.monash.edu>Monash University</a>, Australia, and Editor-​​in-​​Chief of the <a href=https://ijf.forecasters.org>Inter­na­tional Jour­nal of Fore­cast­ing</a>.  </p>
    </div>
    <div class="column small-12 medium-4">
      
      <h4 id="contact">Contact</h4>
      <ul class="fa-ul">
	
	<li><i class="fa-li fa fa-university" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://www.monash.edu/business/econometrics-and-business-statistics">Department of Econometrics &amp; Business Statistics, Monash University, Clayton VIC 3800, Australia.</a></li>
	
	<li><i class="fa-li fa fa-envelope" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="mailto:Rob.Hyndman@monash.edu">Rob.Hyndman@monash.edu</a></li>
	
	<li><i class="fa-li fa fa-twitter" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://twitter.com/robjhyndman">@robjhyndman</a> on Twitter</li>
	
	<li><i class="fa-li fa fa-github-alt" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://github.com/robjhyndman/">robjhyndman</a> on GitHub</li>
	
	<li><i class="fa-li ai ai-google-scholar" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://scholar.google.com/citations?user=vamErfkAAAAJ">Google Scholar</a></li>
	
      </ul>
    </div>
    <div class="column small-12 medium-4">
      <h4>Subscribe</h4>
      <p><i><i class="fa fa-rss-square" style="color:#03396c;"></i> To receive updates from this site, you can subscribe to using an <a href="http://feeds.feedburner.com/ProfessorRobJHyndman">RSS feed reader</a> or <a href="https://feedburner.google.com/fb/a/mailverify?uri=ProfessorRobJHyndman">by email</a>.</i></p>
      <h4>Search</h4>
      <a id="searchsite">
	<form method="get" action="https://duckduckgo.com/">
	  <label for="search-field" class="show-for-sr">Search the site</label>
	  <input type="search" name="q" maxlength="255" placeholder="Search the site" id="search-field">
	  <input type="hidden" name="sites" value="https://robjhyndman.com"/>
	  <input type="hidden" name="k7" value="#faf8f8"/>
	  <input type="hidden" name="kj" value="#b33"/>
	  <input type="hidden" name="ky" value="#fafafa"/>
	  <input type="hidden" name="kx" value="b"/>
	  <input type="hidden" name="ko" value="-1"/>
	  <input type="hidden" name="k1" value="-1"/>
	  <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
	</form>
      </a>
    </div>
  </div>
  </span>
</footer>

    <div class="endofpage">
    <footer id="footer">
    <section class="wrapper small">Powered by <a href="http://gohugo.io">Hugo</a>
    and <a href="https://github.com/rstudio/blogdown">Blogdown</a>.
     &copy; <a href="https://robjhyndman.com">Rob&nbsp;J&nbsp;Hyndman</a> 1993&ndash;2018.
    </section>
    </footer>
    </div>

    <script src="https://robjhyndman.com/js/jquery.js"></script>
    <script src="https://robjhyndman.com/js/what-input.js"></script>
    <script src="https://robjhyndman.com/js/foundation.min.js"></script>
    <script src="https://robjhyndman.com/js/finite.js"></script>

    
    <script src="https://robjhyndman.com/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-5004894-1', 'auto');
ga('send', 'pageview');
</script>

 </body>
</html>
