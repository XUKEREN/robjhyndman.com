<!doctype html>
<html class="no-js" lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Errors on percentage errors | Rob J Hyndman</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans|Merriweather" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/foundation.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/highlight.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/academicons.min.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/finite.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/kube.css">
    <link rel="stylesheet" href="https://robjhyndman.com/css/robjhyndman.css">
  </head>
  <body>
    <header>
      <nav class="nav-bar">
	
	  <div class="title-bar" data-responsive-toggle="site-menu" data-hide-for="medium">
	    <button class="site-hamburger" type="button" data-toggle>
	      <i class="fa fa-bars fa-lg" aria-hidden="true"></i>
	    </button>
	    <div class="title-bar-title site-title">
	      <a href="https://robjhyndman.com/"  style="color: #b3cde0">Rob J Hyndman</a>
	    </div>
	    <div class="title-bar-right pull-right">
	      


	    </div>
	  </div>

	  
	    <div class="top-bar" id="site-menu" >
	      <div class="top-bar-title show-for-medium site-title">
		<a href="https://robjhyndman.com/"  style="color: #b3cde0;">Rob J Hyndman</a>
	      </div>
	      <div class="top-bar-left">
		<ul class="menu vertical medium-horizontal">
		  
		  
		  <li><a href="https://robjhyndman.com/hyndsight/">Hyndsight blog</a></li>
		  
		  <li><a href="https://robjhyndman.com/publications/">Publications</a></li>
		  
		  <li><a href="https://robjhyndman.com/software/">Software</a></li>
		  
		  <li><a href="https://robjhyndman.com/seminars/">Seminars</a></li>
		  
		  <li><a href="https://robjhyndman.com/teaching/">Teaching</a></li>
		  
		  <li><a href="https://robjhyndman.com/research-team/">Research team</a></li>
		  
		  <li><a href="https://robjhyndman.com/about/">About</a></li>
		  
		</ul>
	      </div>
	      <div class="top-bar-right show-for-medium">
		


	      </div>
	    </div>
	  
	</nav>
    </header>
    <main>
      

<div class="wrapper">
<div class="units-row" style='margin-bottom: 0px;'>
<div class="unit-20">&nbsp;</div>
<div class="unit-60"><h1>Errors on percentage errors</h1></div>
</div>
<div class="units-row">
  <div class="unit-20 dateblock" style='text-align: right;'><h4 style='padding: .8ex 0px .8ex 0px;'><a href="https://robjhyndman.com/hyndsight">Hyndsight</a></h4>
      <div class="post-metadata">
  <span class="post-date">
    <time datetime="2014-04-16 12:11:06 &#43;0000 &#43;0000" itemprop="datePublished">16 April 2014</time>
  </span>
  
  
  
  <span class="post-tags">
    <p><i class="fa fa-tags"></i>
    
    <a class="post-tag" href="https://robjhyndman.com/categories/forecasting">forecasting</a>,
     
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/fpp">fpp</a>, 
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/ijf">IJF</a>, 
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/r">R</a>, 
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/references">references</a>, 
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/reproducible-research">reproducible research</a>, 
    
    
    <a class="post-tag" href="https://robjhyndman.com/categories/statistics">statistics</a>
    
  </span>
  
  
</div>

    </div>
<div class="unit-60">

  <p>The MAPE (mean absolute percentage error) is a popular measure for forecast accuracy and is defined as
$$
\text{MAPE} = 100\text{mean}(|y_t - \hat{y}_t|/|y_t|)
$$
where $y_t$ denotes an observation and $\hat{y}_t$ denotes its forecast, and the mean is taken over $t$.</p>

<p><a href="http://www.forecastingprinciples.com/files/LRF-Ch13b.pdf">Armstrong (1985, p.348)</a> was the first (to my knowledge) to point out the asymmetry of the MAPE saying that &ldquo;it has a bias favoring estimates that are below the actual values&rdquo;.<!-- more --> A few years later, <a href="http://dx.doi.org/10.1016/0169-2070%2892%2990008-W">Armstrong and Collopy (1992)</a> argued that the MAPE &ldquo;puts a heavier penalty on forecasts that exceed the actual than those that are less than the actual&rdquo;. <a href="http://dx.doi.org/10.1016/0169-2070%2893%2990079-3">Makridakis (1993)</a> took up the argument saying that &ldquo;equal errors above the actual value result in a greater APE than those below the actual value&rdquo;. He provided an example where $y_t=150$ and $\hat{y}_t=100$, so that the relative error is <sup>50</sup>&frasl;<sub>150</sub>=0.33, in contrast to the situation where $y_t=100$ and $\hat{y}_t=150$, when the relative error would be <sup>50</sup>&frasl;<sub>100</sub>=0.50.</p>

<p>Thus, the MAPE puts a heavier penalty on negative errors (when $y_t &lt; {\hat{y}_t}$) than on positive errors. This is what is stated in <a href="http://www.otexts.org/fpp/2/5">my textbook</a>. Unfortunately, Anne Koehler and I got it the wrong way around in <a href="https://robjhyndman.com/publications/another-look-at-measures-of-forecast-accuracy/">our 2006 paper on measures of forecast accuracy</a>, where we said the heavier penalty was on positive errors. We were probably thinking that a forecast that is too large is a positive error. However, forecast errors are defined as $y_t - \hat{y}_{t}$, so positive errors arise only when the forecast is too small.</p>

<p>To avoid the asymmetry of the MAPE, <a href="http://www.forecastingprinciples.com/files/LRF-Ch13b.pdf">Armstrong (1985, p.348)</a> proposed the &ldquo;adjusted MAPE&rdquo;, which he defined as
$$
\overline{\text{MAPE}} = 100\text{mean}(2|y_t - \hat{y}_t|/(y_t + \hat{y}_t))
$$
By that definition, the adjusted MAPE can be negative (if $y_t+\hat{y}_t &lt; 0$), or infinite (if $y_t+\hat{y}_t=0$), although Armstrong claims that it has a range of (0,200). Presumably he never imagined that data and forecasts can take negative values. Strangely, there is no reference to this measure in <a href="http://dx.doi.org/10.1016/0169-2070(92)90008-W">Armstrong and Collopy (1992)</a>.</p>

<p><a href="http://dx.doi.org/10.1016/0169-2070(93)90079-3">Makridakis (1993)</a> proposed almost the same measure, calling it the &ldquo;symmetric MAPE&rdquo; (sMAPE), but without crediting Armstrong (1985), defining it
$$
\text{sMAPE} = 100\text{mean}(2|y_t - \hat{y}_t|/|y_t + \hat{y}_t|)
$$
However, in the M3 competition paper by <a href="http://dx.doi.org/10.1016/S0169-2070%2800%2900057-1">Makridakis and Hibon (2000)</a>, sMAPE is defined equivalently to Armstrong&rsquo;s adjusted MAPE (without the absolute values in the denominator), again without reference to Armstrong (1985). Makridakis and Hibon claim that this version of sMAPE has a range of $(-200,200)$.</p>

<p><a href="http://dx.doi.org/10.1016/0305-0483(86)90013-7">Flores (1986)</a> proposed a modified version of Armstrong&rsquo;s measure, defined as exactly half of the adjusted MAPE defined above. He claimed (again incorrectly) that it had an upper bound of 100.</p>

<p>Of course, the true range of the adjusted MAPE is $(-\infty,\infty)$ as is easily seen by considering the two cases $y_t+\hat{y}_t = \varepsilon$ and $y_t+\hat{y}_t = -\varepsilon$, where $\varepsilon&gt;0$, and letting $\varepsilon\rightarrow0$. Similarly, the true range of the sMAPE defined by Makridakis (1993) is $(0,\infty)$. I&rsquo;m not sure that these errors have previously been documented, although they have surely been noticed.</p>

<p><a href="http://dx.doi.org/10.1016/S0169-2070%2899%2900007-2">Goodwin and Lawton (1999)</a> point out that on a percentage scale, the MAPE is symmetric and the sMAPE is asymmetric. For example, if $y_t =100$, then $\hat{y}_t=110$ gives a 10% error, as does $\hat{y}_t=90$. Either would contribute the same increment to MAPE, but a different increment to sMAPE.</p>

<p><a href="http://dx.doi.org/10.1016/S0169-2070%2801%2900119-4">Anne Koehler (2001)</a> in a commentary on the M3 competition, made the same point, but without reference to Goodwin and Lawton.</p>

<p>Whether symmetry matters or not, and whether we want to work on a percentage or absolute scale, depends entirely on the problem, so these discussions over (a)symmetry don&rsquo;t seem particularly useful to me.</p>

<p><a href="http://www.researchgate.net/publication/228774888_Assessing_forecast_accuracy_measures/file/32bfe50da5f6e9d263.pdf">Chen and Yang (2004)</a>, in an unpublished working paper, defined the sMAPE as
$$
\text{sMAPE} = \text{mean}(2|y_t - \hat{y}_t|/(|y_t| + |\hat{y}_t|)).
$$
They still called it a measure of &ldquo;percentage error&rdquo; even though they dropped the multiplier 100. At least they got the range correct, stating that this measure has a maximum value of two when either $y_t$ or $\hat{y}_t$ is zero, but is undefined when both are zero. The range of this version of sMAPE is (0,2). Perhaps this is the definition that Makridakis and Armstrong intended all along, although neither has ever managed to include it correctly in one of their papers or books.</p>

<p>As will be clear by now, the literature on this topic is littered with errors. The <a href="http://en.wikipedia.org/wiki/Symmetric_mean_absolute_percentage_error">Wikipedia page on sMAPE</a> contains several as well, which a reader might like to correct.</p>

<p>If all data and forecasts are non-negative, then the same values are obtained from all three definitions of sMAPE. But more generally, the last definition above from Chen and Yang is clearly the most sensible, if the sMAPE is to be used at all. In the M3 competition, all data were positive, but some forecasts were negative, so the differences are important. However, I can&rsquo;t match the published results for any definition of sMAPE, so I&rsquo;m not sure how the calculations were actually done.</p>

<p>Personally, I would much prefer that either the original MAPE be used (when it makes sense), or the <a href="http://en.wikipedia.org/wiki/Mean_absolute_scaled_error">mean absolute scaled error (MASE)</a> be used instead. There seems little point using the sMAPE except that it makes it easy to compare the performance of a new forecasting algorithm against the published M3 results. But even there, it is not necessary, as the forecasts submitted to the M3 competition are all available in the <a href="http://cran.r-project.org/web/packages/Mcomp/">Mcomp package for R</a>, so a comparison can easily be made using whatever measure you prefer.</p>

<hr />

<p>Thanks to Andrey Kostenko for alerting me to the different definitions of sMAPE in the literature.</p>


      <meta itemprop="wordCount" content="922">
      <meta itemprop="datePublished" content="2014-04-16">
      <meta itemprop="url" content="https://robjhyndman.com/hyndsight/smape/">

<div class='sans' style="background: #dddddd; padding: 2em;">
<div style="padding-bottom: 1em" >
<div class="share-box">
  <ul class="share">
    <li>
      <a class="facebook" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2frobjhyndman.com%2fhyndsight%2fsmape%2f" target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter" href="https://twitter.com/intent/tweet?text=Errors%20on%20percentage%20errors. https%3a%2f%2frobjhyndman.com%2fhyndsight%2fsmape%2f from @robjhyndman" target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frobjhyndman.com%2fhyndsight%2fsmape%2f&amp;title=Errors%20on%20percentage%20errors" target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo" href="http://service.weibo.com/share/share.php?url=https%3a%2f%2frobjhyndman.com%2fhyndsight%2fsmape%2f&amp;title=Errors%20on%20percentage%20errors" target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email" href="mailto:?subject=Errors%20on%20percentage%20errors&amp;body=https%3a%2f%2frobjhyndman.com%2fhyndsight%2fsmape%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


</div>

    <ul class="pagination" role="navigation" aria-label="Pagination">
      
      <li class="arrow" aria-disabled="true"><a href="https://robjhyndman.com/hyndsight/generating-tables-in-latex/">&laquo; <em>Previous<span class="show-for-sr"> page</span></em>: Generating tables in LaTeX</a></li>
      
      
      <li class="arrow" aria-disabled="true"><a href="https://robjhyndman.com/hyndsight/seven-forecasting-blogs/"><em>Next<span class="show-for-sr"> page</span></em>: Seven forecasting blogs&nbsp;&raquo;</a></li>
      
    </ul>
    <a href="https://robjhyndman.com/hyndsight/">All Hyndsight posts by date</a>
</div>

<span style='font-family: Carlito'>
 <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
              return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'researchtips';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</span>

  </div>
  </div></div>

    </main>
    <footer class="whatisthis">
  <hr class='separator'/>
  <span style="font-family: Carlito, sans; font-size: 0.9em; line-height: 1.05em;">
  <div class="row">
    <div class="column small-12 medium-4">
      <figure class='image-left'>
      <a href="https://robjhyndman.com/" style="border-bottom: none;">
      	<img src="https://robjhyndman.com/img/rjh.png" alt="Portrait of the author" class='avatar' style="max-width: 50%;">
      </a>
  </figure>
  <p>
Rob&nbsp;J&nbsp;Hyndman is Professor of Statistics at <a href=https://www.monash.edu>Monash University</a>, Australia, and Editor-​​in-​​Chief of the <a href=https://ijf.forecasters.org>Inter­na­tional Jour­nal of Fore­cast­ing</a>.  </p>
    </div>
    <div class="column small-12 medium-4">
      
      <h4 id="contact">Contact</h4>
      <ul class="fa-ul">
	
	<li><i class="fa-li fa fa-university" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://www.monash.edu/business/econometrics-and-business-statistics">Department of Econometrics &amp; Business Statistics, Monash University, Clayton VIC 3800, Australia.</a></li>
	
	<li><i class="fa-li fa fa-envelope" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="mailto:Rob.Hyndman@monash.edu">Rob.Hyndman@monash.edu</a></li>
	
	<li><i class="fa-li fa fa-twitter" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://twitter.com/robjhyndman">@robjhyndman</a> on Twitter</li>
	
	<li><i class="fa-li fa fa-github-alt" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://github.com/robjhyndman/">robjhyndman</a> on GitHub</li>
	
	<li><i class="fa-li ai ai-google-scholar" style="color:#03396c;font-size:80%;padding-top:6px;"></i><a href="https://scholar.google.com/citations?user=vamErfkAAAAJ">Google Scholar</a></li>
	
      </ul>
    </div>
    <div class="column small-12 medium-4">
      <h4>Subscribe</h4>
      <p><i><i class="fa fa-rss-square" style="color:#03396c;"></i> To receive updates from this site, you can subscribe to using an <a href="http://feeds.feedburner.com/ProfessorRobJHyndman">RSS feed reader</a> or <a href="https://feedburner.google.com/fb/a/mailverify?uri=ProfessorRobJHyndman">by email</a>.</i></p>
      <h4>Search</h4>
      <a id="searchsite">
	<form method="get" action="https://duckduckgo.com/">
	  <label for="search-field" class="show-for-sr">Search the site</label>
	  <input type="search" name="q" maxlength="255" placeholder="Search the site" id="search-field">
	  <input type="hidden" name="sites" value="https://robjhyndman.com"/>
	  <input type="hidden" name="k7" value="#faf8f8"/>
	  <input type="hidden" name="kj" value="#b33"/>
	  <input type="hidden" name="ky" value="#fafafa"/>
	  <input type="hidden" name="kx" value="b"/>
	  <input type="hidden" name="ko" value="-1"/>
	  <input type="hidden" name="k1" value="-1"/>
	  <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
	</form>
      </a>
    </div>
  </div>
  </span>
</footer>

    <div class="endofpage">
    <footer id="footer">
    <section class="wrapper small">Powered by <a href="http://gohugo.io">Hugo</a>
    and <a href="https://github.com/rstudio/blogdown">Blogdown</a>.
     &copy; <a href="https://robjhyndman.com">Rob&nbsp;J&nbsp;Hyndman</a> 1993&ndash;2018.
    </section>
    </footer>
    </div>

    <script src="https://robjhyndman.com/js/jquery.js"></script>
    <script src="https://robjhyndman.com/js/what-input.js"></script>
    <script src="https://robjhyndman.com/js/foundation.min.js"></script>
    <script src="https://robjhyndman.com/js/finite.js"></script>

    
    <script src="https://robjhyndman.com/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
    </script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
    </script>
    


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-5004894-1', 'auto');
ga('send', 'pageview');
</script>

 </body>
</html>
